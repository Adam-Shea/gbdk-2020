\hypertarget{sms_2metasprites_8h}{}\doxysubsection{sms/metasprites.h File Reference}
\label{sms_2metasprites_8h}\index{sms/metasprites.h@{sms/metasprites.h}}
{\ttfamily \#include $<$sms/hardware.\+h$>$}\newline
{\ttfamily \#include $<$types.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sms_2metasprites_8h_a9f9f390a57460914e27c7604b7d8379a}{metasprite\+\_\+end}}~-\/128
\item 
\#define \mbox{\hyperlink{sms_2metasprites_8h_aa88dc4d5e35045509b8955a4a23a30aa}{M\+E\+T\+A\+S\+P\+R\+\_\+\+I\+T\+EM}}(dy,  dx,  dt,  a)~\{(dy),(dx),(dt)\}
\item 
\#define \mbox{\hyperlink{sms_2metasprites_8h_aa1d425dcce3cd104751744535b6a389a}{M\+E\+T\+A\+S\+P\+R\+\_\+\+T\+E\+RM}}~\{\mbox{\hyperlink{sms_2metasprites_8h_a9f9f390a57460914e27c7604b7d8379a}{metasprite\+\_\+end}}\}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} \mbox{\hyperlink{sms_2metasprites_8h_aba6401cc8173158a9f37ee22094c03d3}{metasprite\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{sms_2metasprites_8h_a0c668f442b4764275a1dade597a59e20}{hide\+\_\+sprites\+\_\+range}} (\mbox{\hyperlink{asm_2gbz80_2types_8h_ab27e9918b538ce9d8ca692479b375b6a}{U\+I\+N\+T8}} from, \mbox{\hyperlink{asm_2gbz80_2types_8h_ab27e9918b538ce9d8ca692479b375b6a}{U\+I\+N\+T8}} to) \mbox{\hyperlink{asm_2z80_2types_8h_aa19670cfef9fe1cc31f28fafb0e1000a}{Z88\+D\+K\+\_\+\+C\+A\+L\+L\+EE}} \mbox{\hyperlink{asm_2types_8h_acb825e83a33fcc06482c59b4ab2cf961}{P\+R\+E\+S\+E\+R\+V\+E\+S\+\_\+\+R\+E\+GS}}(\mbox{\hyperlink{sms_8h_aade844cba18122ad48cb2f92b1c87ab0}{iyh}}
\item 
\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \mbox{\hyperlink{sms_2metasprites_8h_a77475e913bf0a19df28bdbf9d1cf392b}{move\+\_\+metasprite}} (const \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} $\ast$metasprite, \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} base\+\_\+tile, \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} base\+\_\+sprite, \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} x, \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} y)
\item 
void \mbox{\hyperlink{sms_2metasprites_8h_af8de5a888d65448b9d34027a0e1ce906}{hide\+\_\+metasprite}} (const \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} $\ast$metasprite, \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} base\+\_\+sprite)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const void $\ast$ \mbox{\hyperlink{sms_2metasprites_8h_aae51f066cc5436457f62351847bfc64b}{\+\_\+\+\_\+current\+\_\+metasprite}}
\item 
\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \mbox{\hyperlink{sms_2metasprites_8h_a345fa52509387bd18a4092178a18286f}{\+\_\+\+\_\+current\+\_\+base\+\_\+tile}}
\item 
\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \mbox{\hyperlink{sms_2metasprites_8h_a4bfe4d95031b67951cf6bc342110db39}{\+\_\+\+\_\+render\+\_\+shadow\+\_\+\+O\+AM}}
\item 
static \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \mbox{\hyperlink{sms_2metasprites_8h_af279c752a3b15c4bd5c67f54b92e553f}{iyl}}
\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
\hypertarget{sms_2metasprites_8h_autotoc_md4}{}\doxysubsubsection{Metasprite support}\label{sms_2metasprites_8h_autotoc_md4}
A metasprite is a larger sprite made up from a collection of smaller individual hardware sprites. Different frames of the same metasprites can share tile data.

The api supports metasprites in both \mbox{\hyperlink{sms_8h_aa87bec0d134136fdb727f52cb773b792}{S\+P\+R\+I\+T\+E\+S\+\_\+8x8}} and \mbox{\hyperlink{sms_8h_af91d252f07f4764996154820f970c101}{S\+P\+R\+I\+T\+E\+S\+\_\+8x16}} mode. If 8x16 mode is used then the height of the metasprite must be a multiple of 16.

The origin (pivot) for the metasprite is not required to be in the upper left-\/hand corner as with regular hardware sprites.

Use the \mbox{\hyperlink{docs_toolchain_utility_png2asset}{utility\+\_\+png2asset}} tool to convert single or multiple frames of graphics into metasprite structured data for use with the ...metasprite...() functions.\hypertarget{sms_2metasprites_8h_autotoc_md5}{}\doxysubsubsection{Metasprites composed of variable numbers of sprites}\label{sms_2metasprites_8h_autotoc_md5}
When using png2asset, it\textquotesingle{}s common for the output of different frames to be composed of different numbers of hardware sprites (since it\textquotesingle{}s trying to create each frame as efficiently as possible). Due to that, it\textquotesingle{}s good practice to clear out (hide) unused sprites in the shadow\+\_\+\+O\+AM that have been set by previous frames. 

\doxysubsubsection{Macro Definition Documentation}
\mbox{\Hypertarget{sms_2metasprites_8h_a9f9f390a57460914e27c7604b7d8379a}\label{sms_2metasprites_8h_a9f9f390a57460914e27c7604b7d8379a}} 
\index{metasprites.h@{metasprites.h}!metasprite\_end@{metasprite\_end}}
\index{metasprite\_end@{metasprite\_end}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{metasprite\_end}{metasprite\_end}}
{\footnotesize\ttfamily \#define metasprite\+\_\+end~-\/128}

\mbox{\Hypertarget{sms_2metasprites_8h_aa88dc4d5e35045509b8955a4a23a30aa}\label{sms_2metasprites_8h_aa88dc4d5e35045509b8955a4a23a30aa}} 
\index{metasprites.h@{metasprites.h}!METASPR\_ITEM@{METASPR\_ITEM}}
\index{METASPR\_ITEM@{METASPR\_ITEM}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{METASPR\_ITEM}{METASPR\_ITEM}}
{\footnotesize\ttfamily \#define M\+E\+T\+A\+S\+P\+R\+\_\+\+I\+T\+EM(\begin{DoxyParamCaption}\item[{}]{dy,  }\item[{}]{dx,  }\item[{}]{dt,  }\item[{}]{a }\end{DoxyParamCaption})~\{(dy),(dx),(dt)\}}

\mbox{\Hypertarget{sms_2metasprites_8h_aa1d425dcce3cd104751744535b6a389a}\label{sms_2metasprites_8h_aa1d425dcce3cd104751744535b6a389a}} 
\index{metasprites.h@{metasprites.h}!METASPR\_TERM@{METASPR\_TERM}}
\index{METASPR\_TERM@{METASPR\_TERM}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{METASPR\_TERM}{METASPR\_TERM}}
{\footnotesize\ttfamily \#define M\+E\+T\+A\+S\+P\+R\+\_\+\+T\+E\+RM~\{\mbox{\hyperlink{sms_2metasprites_8h_a9f9f390a57460914e27c7604b7d8379a}{metasprite\+\_\+end}}\}}



\doxysubsubsection{Typedef Documentation}
\mbox{\Hypertarget{sms_2metasprites_8h_aba6401cc8173158a9f37ee22094c03d3}\label{sms_2metasprites_8h_aba6401cc8173158a9f37ee22094c03d3}} 
\index{metasprites.h@{metasprites.h}!metasprite\_t@{metasprite\_t}}
\index{metasprite\_t@{metasprite\_t}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{metasprite\_t}{metasprite\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}}}

Metasprite sub-\/item structure 
\begin{DoxyParams}{Parameters}
{\em dy} & (int8\+\_\+t) Y coordinate of the sprite relative to the metasprite origin (pivot) \\
\hline
{\em dx} & (int8\+\_\+t) X coordinate of the sprite relative to the metasprite origin (pivot) \\
\hline
{\em dtile} & (uint8\+\_\+t) Start tile relative to the metasprites own set of tiles\\
\hline
\end{DoxyParams}
Metasprites are built from multiple \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} items (one for each sub-\/sprite) and a pool of tiles they reference. If a metasprite has multiple frames then each frame will be built from some number of \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} items (which may vary based on how many sprites are required for that particular frame).

A metasprite frame is terminated with a \{metasprite\+\_\+end\} entry. 

\doxysubsubsection{Function Documentation}
\mbox{\Hypertarget{sms_2metasprites_8h_a0c668f442b4764275a1dade597a59e20}\label{sms_2metasprites_8h_a0c668f442b4764275a1dade597a59e20}} 
\index{metasprites.h@{metasprites.h}!hide\_sprites\_range@{hide\_sprites\_range}}
\index{hide\_sprites\_range@{hide\_sprites\_range}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{hide\_sprites\_range()}{hide\_sprites\_range()}}
{\footnotesize\ttfamily void hide\+\_\+sprites\+\_\+range (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{asm_2gbz80_2types_8h_ab27e9918b538ce9d8ca692479b375b6a}{U\+I\+N\+T8}}}]{from,  }\item[{\mbox{\hyperlink{asm_2gbz80_2types_8h_ab27e9918b538ce9d8ca692479b375b6a}{U\+I\+N\+T8}}}]{to }\end{DoxyParamCaption})}

Hides all hardware sprites in range from $<$= X $<$ to 
\begin{DoxyParams}{Parameters}
{\em from} & start O\+AM index \\
\hline
{\em to} & finish O\+AM index \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{sms_2metasprites_8h_a77475e913bf0a19df28bdbf9d1cf392b}\label{sms_2metasprites_8h_a77475e913bf0a19df28bdbf9d1cf392b}} 
\index{metasprites.h@{metasprites.h}!move\_metasprite@{move\_metasprite}}
\index{move\_metasprite@{move\_metasprite}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{move\_metasprite()}{move\_metasprite()}}
{\footnotesize\ttfamily \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} move\+\_\+metasprite (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} $\ast$}]{metasprite,  }\item[{\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}}]{base\+\_\+tile,  }\item[{\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}}]{base\+\_\+sprite,  }\item[{\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}}]{x,  }\item[{\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Moves metasprite to the absolute position x and y


\begin{DoxyParams}{Parameters}
{\em metasprite} & Pointer to the first struct of the metasprite (for the desired frame) \\
\hline
{\em base\+\_\+tile} & Number of the first tile where the metasprite\textquotesingle{}s tiles start \\
\hline
{\em base\+\_\+sprite} & Number of the first hardware sprite to be used by the metasprite ~\newline
 \\
\hline
{\em x} & Absolute x coordinate of the sprite \\
\hline
{\em y} & Absolute y coordinate of the sprite\\
\hline
\end{DoxyParams}
Moves {\bfseries{metasprite}} to the absolute position {\bfseries{x}} and {\bfseries{y}} (with {\bfseries{no flip}} on the X or Y axis). Hardware sprites are allocated starting from {\bfseries{base\+\_\+sprite}}, using tiles starting from {\bfseries{base\+\_\+tile}}.

Sets\+: \begin{DoxyItemize}
\item \+\_\+\+\_\+current\+\_\+metasprite = metasprite; \item \+\_\+\+\_\+current\+\_\+base\+\_\+tile = base\+\_\+tile;\end{DoxyItemize}
\begin{DoxyReturn}{Returns}
Number of hardware sprites used to draw this metasprite 
\end{DoxyReturn}
\mbox{\Hypertarget{sms_2metasprites_8h_af8de5a888d65448b9d34027a0e1ce906}\label{sms_2metasprites_8h_af8de5a888d65448b9d34027a0e1ce906}} 
\index{metasprites.h@{metasprites.h}!hide\_metasprite@{hide\_metasprite}}
\index{hide\_metasprite@{hide\_metasprite}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{hide\_metasprite()}{hide\_metasprite()}}
{\footnotesize\ttfamily void hide\+\_\+metasprite (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structmetasprite__t}{metasprite\+\_\+t}} $\ast$}]{metasprite,  }\item[{\mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}}]{base\+\_\+sprite }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Hides a metasprite from the screen


\begin{DoxyParams}{Parameters}
{\em metasprite} & Pointer to first struct of the desired metasprite frame \\
\hline
{\em base\+\_\+sprite} & Number of hardware sprite to start with\\
\hline
\end{DoxyParams}
Sets\+: \begin{DoxyItemize}
\item \+\_\+\+\_\+current\+\_\+metasprite = metasprite; \end{DoxyItemize}


\doxysubsubsection{Variable Documentation}
\mbox{\Hypertarget{sms_2metasprites_8h_aae51f066cc5436457f62351847bfc64b}\label{sms_2metasprites_8h_aae51f066cc5436457f62351847bfc64b}} 
\index{metasprites.h@{metasprites.h}!\_\_current\_metasprite@{\_\_current\_metasprite}}
\index{\_\_current\_metasprite@{\_\_current\_metasprite}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{\_\_current\_metasprite}{\_\_current\_metasprite}}
{\footnotesize\ttfamily const void$\ast$ \+\_\+\+\_\+current\+\_\+metasprite\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{sms_2metasprites_8h_a345fa52509387bd18a4092178a18286f}\label{sms_2metasprites_8h_a345fa52509387bd18a4092178a18286f}} 
\index{metasprites.h@{metasprites.h}!\_\_current\_base\_tile@{\_\_current\_base\_tile}}
\index{\_\_current\_base\_tile@{\_\_current\_base\_tile}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{\_\_current\_base\_tile}{\_\_current\_base\_tile}}
{\footnotesize\ttfamily \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \+\_\+\+\_\+current\+\_\+base\+\_\+tile\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{sms_2metasprites_8h_a4bfe4d95031b67951cf6bc342110db39}\label{sms_2metasprites_8h_a4bfe4d95031b67951cf6bc342110db39}} 
\index{metasprites.h@{metasprites.h}!\_\_render\_shadow\_OAM@{\_\_render\_shadow\_OAM}}
\index{\_\_render\_shadow\_OAM@{\_\_render\_shadow\_OAM}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{\_\_render\_shadow\_OAM}{\_\_render\_shadow\_OAM}}
{\footnotesize\ttfamily \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} \+\_\+\+\_\+render\+\_\+shadow\+\_\+\+O\+AM\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{sms_2metasprites_8h_af279c752a3b15c4bd5c67f54b92e553f}\label{sms_2metasprites_8h_af279c752a3b15c4bd5c67f54b92e553f}} 
\index{metasprites.h@{metasprites.h}!iyl@{iyl}}
\index{iyl@{iyl}!metasprites.h@{metasprites.h}}
\doxyparagraph{\texorpdfstring{iyl}{iyl}}
{\footnotesize\ttfamily \mbox{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}} iyl}

